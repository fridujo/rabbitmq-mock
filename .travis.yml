language: java
sudo: false # faster builds

cache:
  directories:
  - "$HOME/.m2"

script: "mvn verify"

after_success:
- bash <(curl -s https://codecov.io/bash)
- openssl aes-256-cbc -pass pass:$ENCRYPTION_PASSWORD -in $GPG_DIR/pubring.gpg.enc
  -out $GPG_DIR/pubring.gpg -d
- openssl aes-256-cbc -pass pass:$ENCRYPTION_PASSWORD -in $GPG_DIR/secring.gpg.enc
  -out $GPG_DIR/secring.gpg -d
- "$GPG_DIR/publish.sh"

after_failure:
  - cat target/it/**/build.log

env:
  global:
  - GPG_DIR="`pwd`/deploy"
  - secure: qkxjd4ALb1txvlmeAJqNdWOmzK6tOoCK0Kuh4g8JeLheGlwHOROMjMTyda88K31jzCYlmXMiMO4YjCHDW4IuFwizc1Fad+LTmqTkXmJ8fu2K16uYUgw+hJG4/Eh4NG4makGrIfTfX+vnEv+h1W6sWPwRSPl6Y5Xv9AYOeTXWC68gonfe32ncJdvl6NteUPCgMoylmQPUDlUvHCXTHwukvA/+4BirPPhWeKyCX3g/W4iX+m1xbD4UGovn6r5H7K5QufxLTmYpUL1Mhol0hxv+v3yuEWjZEbHS3g1GmwAmS4tGkLloQCz7nNgey45gwOZRkX3advOZ+5imA5107wbUKLq5qKDsyGAZqN6jhIutPyv2vfq439aBJLarZpT4I5VSambGXNhY27zxtjxAdTw48PRb3huS23JDTyAMAX7/WdWCJPY4EvA+IpldVGEKHXbHJ2WgoSj7XbQNtwjcFgzsc6mIqcd2+KAh09AAwFlPbAqX4T7ASImCS8ypFa8ZtkNYRFdfmg4xYtNHsyopfQdnKzcSigVlRisstrKKclALLBcVRAPSlWB5NbydpIuRHmMwnYSxuMFXVHWN9old850cioVHO5TcnkD/ROZmPDEIoPEA59sao3PKppYbnglA5kjSyd+5OWtyeanLWDpAbmNfb96oyVDaHy/XbnBzV/f1jcs=
  - secure: C/DOoIB4NuA321ejKm8D5IXqsGReneMJyvpUGaCMYYwJEm3kVDKmDyCZ593ZZTzymxEoMEBHgc8MWBH9tqBTBAN3ZFubOK8CEmxcZNSBRyOpjTWPpjltoyaP7V2MCmq94EYXuvHsoJG7LdKRwXKek8BJkEJDubWB/ZlO40cXAx6aw5GL7swQaH4/WsRbGGOQNYKifuUueKGTZ3DMBjS5dbsx1+uMyZRBI4Z/ce7vRaz/JRSVZ3EWirm4w2FA//6UXW4HZCfDQQIp55RD0LaWL+z8mN24lWXNdTAzrRPD/ewJ75WndIJ5vFtyg789ue5+xJSA3dnoAVuGHEMkiWadAMNKu9SQ8TSW5KgEyNzQVz8AXPuZ4Hd8JWNutVpHzPh7mfhM9lb25XwQf7TUthgMjWasK+wETuYJS1cRKt/XlYCC3JTntBaIC1euLu0EKwYjhGM6jybcFVZBrIgOqO91YUfw8BcNiCS6riI71H9xSQzUyEOojqJK1NYgulB16bKVOgSghqGiG6mhnNvryM+n4EiH1CYzNEuKzjO0FBlnGlUz0qxGLS00TrlKFFe3nr3Fq+eQssJzyB1pQ7b+uE+PjAJJBz6YpjWHOWgElVy1v1vcBZD0GSmVYYNgwYxl3SX2XgeTGdXhkxY2DR/445EX6TxuXZVue89FYswYeyVCN1Q=
  - secure: UMbYkXpavsHJVSFgDXKrdFfwyBmuLwU9EuRkePH/jx1puwOfmQRnpyhFv3MMoWUkjerICw1WF1wn8Apf4o4ihFosML19lGZPX4VddYjGFLcwHLzPvpJdb/pfMrVvxtEFlrlztW3t+WQuln+AHPPUlCKn9dSN5Bxjm16ye6N6LOEtPmINoekYSb9X59pK6s+0EmH3RiviAVqhXLlX3TxD4I6lle2WpyDtgX4tlTze5Ex8Ejv0cw/EgjpEZe+YpvFRNvk1wydPwbJ7NEZk1povh9FfaIUe9qL34IzLFIYZxvG2E4rZ7Uu10cqTRF4DiRMJ1Va2LgnFTcyE+XGr9LX861hwYRmlHfzqkfCYrw5xipMAIbtfknkpxQM3j0fLhz+JafW1NmzJXPiZqvTCCc4iE2LGAt/vhwGXe5JHfRc56rcWR7n+cEjDcMpNuQUQmGPau4iAkSce5xxgs5lW1unIw4MVjEBnExMAIyHoRnWiX2l5OAEIdd02w0xDCX4zUvs+iBftYlHki8JZoTEU8JvKPYNZH8Hb1dzqAhkKYyacTypWON5Ku903E7vYSf6RUwuLXoKCN8BnxktdxXKMm2rGbPq4/G6qMug83m30bNP7xTW1cGQsQXKrwRbqLf7BmT0J6Ydfl5JiNgLI9NyHFkJ53LtvsnZu1vk7r9s786lYxjs=
  - secure: ffa+X4oDCHTRzsZFL+24jnn7BK9ovXGH8usiDy8C/3JNgMVKV8WlrT3DZyGGZjmDnn1pUy8dsFSQkV0SIeZWlupYxz6k9Uqzia1Yodb6HS4m+R3mk+g10xjLfSg+NzIhnGfT6qgeUjQyB+dlIVH15ehUSI6wSeLLft6X7/AMAqNuWSh3OWocFRgL7kSvinQOQtVRT49eELUigcWwmC74xfKb4xb9g/DpRNVqs4cwrwxheavy3cnWMeHZgfbcnDfnrzUL4i90tkeAsbq9AUP0qKcUHvB+ZEZeGbrQ0rV1uH9TJQ5PCLIdRzL49yJptGA7cAYfDa7I9fQ/vOF6CjyD5dWGj0CxB2xo+v5VJg/96TfIpLxN0C/XBxtNdRwwX4OWTbqGI3Pkr6MsPhM3E3IOtELcpyOEHV1QrU0lpooxTgNfDQ5VCHc8lufQc83C2n+IiLjHuB8uqgLtOlJRjkW6xYXhh/kkdkloVuo0sYvdmPHc7RrCUiHYeVd/CrU8qiFQd3BxUFAiTX200QvioKVTW7gBKjDk2Sk0UxSiDXsPZrpaS7CKSnQ1UzpjmRwJb/b+QPDmuEMrqj4yOUMoPc7nOkqxJBmAXM6tzDKYgY6+q9BKqQHWo9ZBvjQO6pct7SZwn9QdAk2fS1vVS/9zdevO+1bR/n+mqYg2Vp7RNg4aXY4=
  - secure: TZA1OB2PXUWwsLatR0USK97HxocXeRasCedJMZFV43WWMNojS5DV38+zk4H9N/fOhLfJkKA8Dm2P54ecNL/0EIGuCeswK3xjMOJjLqv3BI2gcL8l7ZyICHV11JIbENG+YMDfSZoIo6xMAGDJjk/cwn3j2TqtvW5hvGo7hFh+1t0JWOdVS9KL6j0q9Nw8slhGOH4fzTFM6NDQ5jJH4QRFXvh2gCkJPtOFgm1I4RxqoV+/9f4XTkMTlZFJznk6yKxdr5KCTB15t9DhcVmLVr2CKbNes31zrHf5Hac83xVKTtR3UbDBvD9x0l3NnqfByGE7vpkQc/tSvb/sbLrymWgjUdQ55Flvl6DmV11ZLHhZOsZoPn+4VJrmzDBsFzHwtSjER/VfWLAbBqbd/Bh+FWn/hTfXs/2ZUD71MQk9sCwk/QPB1lSy9ZfaeiUYr01ehPWWarCW4PGh9n0GjkIHd/PsgZzCCEnvcsQ2h5B2BkL4jobZXxLt2i3ORuY1ShEUT+hVDjAbxAQUj9Id6iwyEvHEBfyxhMiyB5x0PPlzoY1HtSu84PzaLqvh67SaBPxlNVqRLJAW5bdyURRQ+3Z5HdFtdV773YNORaFuUnuze3COWAu+teMgYwGQqa9rnojJc+HS+U58VpRZ0FF+Wef58DhVnM4G05sXawC90vGat3udEcU=
